<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Food Delivery</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #f4f6fb;
}

header {
  padding: 16px;
  font-size: 22px;
  font-weight: 700;
}

.grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
  padding: 16px;
}

.card {
  background: #fff;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 10px 24px rgba(0,0,0,.12);
}

.card img {
  width: 100%;
  height: 130px;
  object-fit: cover;
}

.card .info {
  padding: 12px;
}

.card button {
  width: 100%;
  border: none;
  background: linear-gradient(135deg,#4f46e5,#6c63ff);
  color:#fff;
  padding:10px;
  border-radius:12px;
}

.cart-btn {
  position: fixed;
  bottom: 16px;
  right: 16px;
  background: #111;
  color: #fff;
  padding: 14px 18px;
  border-radius: 999px;
}

.panel {
  position: fixed;
  inset: 0;
  background: #f4f6fb;
  padding: 16px;
  overflow-y: auto;
  z-index: 1000;
}

.hidden { display: none; }

.primary-btn {
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#4f46e5,#6c63ff);
  color:#fff;
  margin-top:12px;
}

.secondary-btn {
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid #ccc;
  background:#fff;
  margin-top:8px;
}

.item {
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}
</style>
</head>

<body>

<header>üçî –ú–µ–Ω—é</header>
<div id="menu" class="grid"></div>

<div class="cart-btn" onclick="openCart()">üõí –ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</div>
<div id="cart" class="panel hidden"></div>

<script>
const tg = Telegram.WebApp;
tg.ready();
tg.expand();

/* ‚ùó –æ—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ */
localStorage.removeItem("cart");

const menu = document.getElementById("menu");
const cartDiv = document.getElementById("cart");

const foods = [
 {id:1,name:"–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",price:450,img:"https://avatars.mds.yandex.net/i?id=f2e936a65ad15cd289abab0c03c9144540793d54-5481525-images-thumbs&n=13"},
 {id:2,name:"–ü–∏—Ü—Ü–∞ –ü–µ–ø–ø–µ—Ä–æ–Ω–∏",price:520,img:"https://avatars.mds.yandex.net/i?id=7510b4effb790779ad6b3265c75d1c7b35471084-3986751-images-thumbs&n=13"},
 {id:3,name:"–ë—É—Ä–≥–µ—Ä —Å –≥–æ–≤—è–¥–∏–Ω–æ–π",price:390,img:"https://avatars.mds.yandex.net/i?id=c9bbef1504a8d0943fecab07d8e57f0a55f40e00-5257529-images-thumbs&n=13"},
 {id:4,name:"–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏",price:180,img:"https://avatars.mds.yandex.net/i?id=619ea05f2d006710198e7654da95f477da422ad3-4097709-images-thumbs&n=13"}
];

let cart = [];

function update(){document.getElementById("count").innerText = cart.length;}

foods.forEach(f=>{
  menu.innerHTML += `
    <div class="card">
      <img src="${f.img}">
      <div class="info">
        <b>${f.name}</b><br>${f.price} ‚ÇΩ
        <button onclick='add(${JSON.stringify(f)})'>–í –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>
    </div>`;
});

function add(f){cart.push(f);update();}

function openCart(){
  let total=0;
  let html="<h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>";
  cart.forEach((i,n)=>{
    total+=i.price;
    html+=`<div class="item">${i.name}<span onclick="removeItem(${n})">‚ùå</span></div>`;
  });
  html+=`
    <b>–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ</b>
    <button class="primary-btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    <button class="secondary-btn" onclick="closeCart()">–ù–∞–∑–∞–¥</button>`;
  cartDiv.innerHTML=html;
  cartDiv.classList.remove("hidden");
}

function removeItem(i){cart.splice(i,1);update();openCart();}
function closeCart(){cartDiv.classList.add("hidden");}

function checkout(){
  cartDiv.innerHTML=`
    <h2>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
    <input id="name" placeholder="–ò–º—è">
    <input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
    <input id="address" placeholder="–ê–¥—Ä–µ—Å">
    <button class="primary-btn" onclick="send()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    <button class="secondary-btn" onclick="closeCart()">–ù–∞–∑–∞–¥</button>`;
}

function send(){
  const total = cart.reduce((s,i)=>s+i.price,0);

  Telegram.WebApp.sendData(JSON.stringify({
    items: cart,
    total,
    name: name.value,
    phone: phone.value,
    address: address.value,
    status: "–ü—Ä–∏–Ω—è—Ç"
  }));

  cartDiv.innerHTML=`
    <h2>‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!</h2>
    <p>–°—Ç–∞—Ç—É—Å: <b>–ü—Ä–∏–Ω—è—Ç</b></p>
    <button class="primary-btn" onclick="backToMenu()">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
  `;
}

function backToMenu(){
  cart=[];
  update();
  cartDiv.classList.add("hidden");
}
</script>

</body>
</html>
