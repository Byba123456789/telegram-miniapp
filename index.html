<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Food Delivery</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin:0;
  font-family:system-ui,sans-serif;
  background:#f4f6fb;
}

header {
  padding:16px;
  font-size:22px;
  font-weight:700;
  display:flex;
  align-items:center;
  gap:12px;
}

.hamburger {
  font-size:24px;
  cursor:pointer;
}

.grid {
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
  padding:16px;
}

.card {
  background:#fff;
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 10px 24px rgba(0,0,0,.12);
}

.card img {
  width:100%;
  height:130px;
  object-fit:cover;
}

.card .info {
  padding:12px;
}

.card button {
  width:100%;
  border:none;
  background:linear-gradient(135deg,#4f46e5,#6c63ff);
  color:#fff;
  padding:10px;
  border-radius:12px;
}

.cart-btn {
  position:fixed;
  bottom:16px;
  right:16px;
  background:#111;
  color:#fff;
  padding:12px 16px;
  border-radius:999px;
  z-index:5;
}

.panel {
  position:fixed;
  inset:0;
  background:#f4f6fb;
  padding:16px;
  overflow-y:auto;
  z-index:10;
}

.hidden {display:none;}

.primary-btn {
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#4f46e5,#6c63ff);
  color:#fff;
  margin-top:12px;
}

.secondary-btn {
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid #ccc;
  background:#fff;
  margin-top:8px;
}

.item {
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}

input,select,textarea {
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid #ccc;
}

/* sidebar */
.sidebar {
  position:fixed;
  top:0;
  left:0;
  width:240px;
  height:100%;
  background:#fff;
  box-shadow:2px 0 12px rgba(0,0,0,.15);
  padding:16px;
  z-index:20;
}

.sidebar button {
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:12px;
  border:none;
  background:#f0f0f0;
}
</style>
</head>

<body>

<header>
  <span class="hamburger" onclick="toggleSidebar()">‚ò∞</span>
  üçî –ú–µ–Ω—é
</header>

<div id="sidebar" class="sidebar hidden">
  <h3>üìÇ –ú–µ–Ω—é</h3>
  <button onclick="showOrders()">üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
  <button onclick="showReviews()">‚≠ê –û—Ç–∑—ã–≤—ã</button>
  <button onclick="openReviewForm()">‚úçÔ∏è –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
  <button onclick="toggleSidebar()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<div id="menu" class="grid"></div>

<div class="cart-btn" onclick="openCart()">üõí (<span id="count">0</span>)</div>
<div id="cart" class="panel hidden"></div>

<script>
Telegram.WebApp.ready();

const menu = document.getElementById("menu");
const cartDiv = document.getElementById("cart");
const sidebar = document.getElementById("sidebar");

let cart = [];
let orders = JSON.parse(localStorage.getItem("orders")||"[]");
let reviews = JSON.parse(localStorage.getItem("reviews")||"[]");

const foods = [
 {id:1,name:"–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞",price:450,img:"https://picsum.photos/300/200?1"},
 {id:2,name:"–ü–∏—Ü—Ü–∞ –ü–µ–ø–ø–µ—Ä–æ–Ω–∏",price:520,img:"https://picsum.photos/300/200?2"},
 {id:3,name:"–ë—É—Ä–≥–µ—Ä —Å –≥–æ–≤—è–¥–∏–Ω–æ–π",price:390,img:"https://picsum.photos/300/200?3"},
 {id:4,name:"–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏",price:180,img:"https://picsum.photos/300/200?4"},
 {id:5,name:"–°—É—à–∏-—Å–µ—Ç –ú–∏–Ω–∏",price:890,img:"https://picsum.photos/300/200?5"},
 {id:6,name:"–†–æ–ª–ª –ö–∞–ª–∏—Ñ–æ—Ä–Ω–∏—è",price:420,img:"https://picsum.photos/300/200?6"},
 {id:7,name:"–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å",price:360,img:"https://picsum.photos/300/200?7"},
 {id:8,name:"–ü–∞—Å—Ç–∞ —Å –∫—É—Ä–∏—Ü–µ–π",price:410,img:"https://picsum.photos/300/200?8"},
 {id:9,name:"–ú–æ—Ä—Å —è–≥–æ–¥–Ω—ã–π",price:120,img:"https://picsum.photos/300/200?9"},
 {id:10,name:"–ö–æ–ª–∞",price:150,img:"https://picsum.photos/300/200?10"}
];

function toggleSidebar(){
  sidebar.classList.toggle("hidden");
}

function update(){
  document.getElementById("count").innerText = cart.length;
}

foods.forEach(f=>{
  menu.innerHTML+=`
  <div class="card">
    <img src="${f.img}">
    <div class="info">
      <b>${f.name}</b><br>${f.price} ‚ÇΩ
      <button onclick='add(${JSON.stringify(f)})'>–í –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  </div>`;
});

function add(f){cart.push(f);update();}

function openCart(){
  let total=0;
  let html="<h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>";
  cart.forEach((i,n)=>{
    total+=i.price;
    html+=`<div class="item">${i.name}<span onclick="cart.splice(${n},1);openCart();update()">‚ùå</span></div>`;
  });
  html+=`
    <b>–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ</b>
    <button class="primary-btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    <button class="secondary-btn" onclick="closeCart()">–ù–∞–∑–∞–¥</button>`;
  cartDiv.innerHTML=html;
  cartDiv.classList.remove("hidden");
}

function closeCart(){cartDiv.classList.add("hidden");}

function checkout(){
  cartDiv.innerHTML=`
    <h2>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
    <input id="name" placeholder="–ò–º—è">
    <input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
    <input id="address" placeholder="–ê–¥—Ä–µ—Å">
    <button class="primary-btn" onclick="finishOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>`;
}

function finishOrder(){
  orders.push({items:[...cart],date:new Date().toLocaleString()});
  localStorage.setItem("orders",JSON.stringify(orders));
  cart=[];
  update();
  if(reviews.length===0) openReviewForm();
  else cartDiv.innerHTML="<h2>‚úÖ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω</h2>";
}

function openReviewForm(){
  cartDiv.classList.remove("hidden");
  cartDiv.innerHTML=`
    <h2>‚≠ê –û—Ç–∑—ã–≤</h2>
    <textarea id="review" placeholder="–í–∞—à –æ—Ç–∑—ã–≤"></textarea>
    <button class="primary-btn" onclick="saveReview()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>`;
}

function saveReview(){
  reviews.push(document.getElementById("review").value);
  localStorage.setItem("reviews",JSON.stringify(reviews));
  cartDiv.innerHTML="<h2>–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–∑—ã–≤!</h2>";
}

function showReviews(){
  cartDiv.classList.remove("hidden");
  cartDiv.innerHTML="<h2>‚≠ê –û—Ç–∑—ã–≤—ã</h2>"+reviews.map(r=>`<p>${r}</p>`).join("");
}

function showOrders(){
  cartDiv.classList.remove("hidden");
  cartDiv.innerHTML="<h2>üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>"+orders.map(o=>`<p>${o.date}</p>`).join("");
}
</script>

</body>
</html>
