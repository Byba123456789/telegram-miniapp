<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Food Delivery</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #f4f6fb;
}

header {
  padding: 16px;
  font-size: 22px;
  font-weight: 700;
}

.grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  padding: 16px;
}

.card {
  background: #fff;
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 6px 16px rgba(0,0,0,.1);
}

.card img {
  width: 100%;
  height: 120px;
  object-fit: cover;
}

.card .info {
  padding: 10px;
}

.card button {
  width: 100%;
  border: none;
  background: #4f46e5;
  color: #fff;
  padding: 8px;
  border-radius: 8px;
  margin-top: 6px;
}

.cart-btn {
  position: fixed;
  bottom: 16px;
  right: 16px;
  background: #111;
  color: #fff;
  padding: 14px 18px;
  border-radius: 999px;
  font-weight: 600;
}
.hidden { display: none; }

.panel {
  padding: 16px;
}

.item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-bottom: 8px;
}
</style>
</head>

<body>

<header>üçî –ú–µ–Ω—é</header>

<div id="menu" class="grid"></div>

<div class="cart-btn" onclick="openCart()">üõí –ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</div>

<div id="cart" class="panel hidden"></div>

<script>
const tg = Telegram.WebApp;
tg.ready();
tg.expand();

const foods = [
 {id:1,name:"–ü–∏—Ü—Ü–∞",price:450,img:"https://picsum.photos/300/200?1"},
 {id:2,name:"–ë—É—Ä–≥–µ—Ä",price:390,img:"https://picsum.photos/300/200?2"},
 {id:3,name:"–°—É—à–∏",price:890,img:"https://picsum.photos/300/200?3"},
 {id:4,name:"–ü–∞—Å—Ç–∞",price:420,img:"https://picsum.photos/300/200?4"},
 {id:5,name:"–°–∞–ª–∞—Ç",price:320,img:"https://picsum.photos/300/200?5"},
 {id:6,name:"–§—Ä–∏",price:180,img:"https://picsum.photos/300/200?6"},
 {id:7,name:"–õ–∞–ø—à–∞",price:380,img:"https://picsum.photos/300/200?7"},
 {id:8,name:"–†–æ–ª–ª—ã",price:520,img:"https://picsum.photos/300/200?8"},
 {id:9,name:"–°—Ç–µ–π–∫",price:980,img:"https://picsum.photos/300/200?9"},
 {id:10,name:"–ú–æ—Ä—Å",price:120,img:"https://picsum.photos/300/200?10"},
 {id:11,name:"–ß–∞–π",price:90,img:"https://picsum.photos/300/200?11"},
 {id:12,name:"–ö–æ—Ñ–µ",price:150,img:"https://picsum.photos/300/200?12"},
 {id:13,name:"–°—É–ø",price:260,img:"https://picsum.photos/300/200?13"},
 {id:14,name:"–¢–∞–∫–æ",price:340,img:"https://picsum.photos/300/200?14"},
 {id:15,name:"–î–µ—Å–µ—Ä—Ç",price:210,img:"https://picsum.photos/300/200?15"}
];

let cart = JSON.parse(localStorage.getItem("cart")||"[]");

function save(){localStorage.setItem("cart",JSON.stringify(cart));update();}
function update(){document.getElementById("count").innerText=cart.length;}

foods.forEach(f=>{
  menu.innerHTML+=`
  <div class="card">
    <img src="${f.img}">
    <div class="info">
      <b>${f.name}</b><br>${f.price} ‚ÇΩ
      <button onclick='add(${JSON.stringify(f)})'>‚ûï –í –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  </div>`;
});

function add(f){cart.push(f);save();}

function openCart(){
  let html="<h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>";
  let total=0;
  cart.forEach((i,n)=>{
    total+=i.price;
    html+=`${i.name} ‚Äî ${i.price} ‚ÇΩ <span onclick="del(${n})">‚ùå</span><br>`;
  });
  html+=`<b>–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ</b><br><br>
  <button onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>`;
  cartDiv.innerHTML=html;
  cartDiv.classList.remove("hidden");
}

function del(i){cart.splice(i,1);save();openCart();}

function checkout(){
  cartDiv.innerHTML=`
  <h2>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
  <input id=name placeholder="–ò–º—è">
  <input id=phone placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
  <input id=street placeholder="–£–ª–∏—Ü–∞">
  <input id=house placeholder="–î–æ–º">
  <select id=pay>
    <option>–ù–∞–ª–∏—á–Ω—ã–µ</option>
    <option>–ö–∞—Ä—Ç–æ–π</option>
  </select>
  <button onclick="send()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>`;
}

function send(){
  tg.sendData(JSON.stringify({
    items:cart,
    name:name.value,
    phone:phone.value,
    address:`${street.value}, ${house.value}`,
    payment:pay.value
  }));
  localStorage.clear();
  tg.close();
}

update();
</script>

</body>
</html>
